<div class="container-fluid">

    <app-page-title title="Saas" [breadcrumbItems]="breadCrumbItems"></app-page-title>
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="media">
                                <div class="me-3">
                                    <img src="assets/images/users/avatar-1.jpg" alt=""
                                         class="avatar-md rounded-circle img-thumbnail">
                                </div>
                                <div class="media-body align-self-center">
                                    <div class="text-muted">
                                        <p class="mb-2">Welcome to Latifa dashboard</p>
                                        <h5 class="mb-1">Latifa Ben zaied</h5>
                                        <p class="mb-0"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 d-none d-lg-block">
                            <div class="clearfix  mt-4 mt-lg-0">
                                <div class="dropdown float-end" ngbDropdown>
<!--                                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"-->
<!--                                            aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>-->
<!--                                        <i class="bx bxs-cog align-middle mr-1"></i> Setting-->
<!--                                    </button>-->
                                    <div class="dropdown-menu dropdown-menu-end" ngbDropdownMenu>
                                        <a class="dropdown-item" href="javascript: void(0);">Action</a>
                                        <a class="dropdown-item" href="javascript: void(0);">Another action</a>
                                        <a class="dropdown-item" href="javascript: void(0);">Something else</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end row -->
                </div>
            </div>
        </div>
    </div>
    <div class="row">


        <div class="col-xl-8">
            <div class="card">
                <div class="card-body">
                    <div class="clearfix">
                        <div class="float-end">
                            <div class="input-group input-group-sm">
                                <select class="form-select form-select-sm" (change)="selectMonth($event.target.value)">
                                    <option *ngFor="let month of availableMonths" [value]="month.value">
                                        {{ month.label }}
                                    </option>
                                </select>
                                <label class="input-group-text">Month</label>
                            </div>
                        </div>
                        <h4 class="card-title mb-4">Engagement level</h4>
                    </div>

                    <div class="row">
                        <div class="col-lg-2">
                            <div class="engagement-box">
                                <h4 class="engagement-title">Current Engagement</h4>
                                <div class="engagement-details">
                                    <span class="percentage">+20%</span>
                                    compared to last month
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-10">
                            <apx-chart class="apex-charts" dir="ltr" [series]="earningLineChart.series"
                                       [chart]="earningLineChart.chart"
                                       [colors]="earningLineChart.colors"
                                       [stroke]="earningLineChart.stroke"
                                       [dataLabels]="earningLineChart.dataLabels"
                                       [xaxis]="earningLineChart.xaxis">

                            </apx-chart>
                        </div>
                    </div>
                </div>
            </div>
        </div>
<!--        <div class="col-xl-8">-->
<!--            <div class="card">-->
<!--                <div class="card-body">-->
<!--                    <div class="clearfix">-->
<!--                        <div class="float-end">-->
<!--                            <div class="input-group input-group-sm">-->
<!--                                <select class="form-select form-select-sm" (change)="selectMonth($event.target.value)">-->
<!--                                    <option *ngFor="let month of availableMonths" [value]="month.value">-->
<!--                                        {{ month.label }}-->
<!--                                    </option>-->
<!--                                </select>-->
<!--                                <label class="input-group-text">Month</label>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <h4 class="card-title mb-4">Enagment Level</h4>-->
<!--                    </div>-->
<!--                    <div class="row" *ngFor="let item of sassEarning">-->
<!--                        &lt;!&ndash;                        <div class="col-lg-4">&ndash;&gt;-->
<!--                        &lt;!&ndash;                            <div class="text-muted">&ndash;&gt;-->
<!--                        &lt;!&ndash;                                <div class="mb-4">&ndash;&gt;-->
<!--                        &lt;!&ndash;                                    <p>test</p>&ndash;&gt;-->
<!--                        &lt;!&ndash;                                    <h4>test</h4>&ndash;&gt;-->
<!--                        &lt;!&ndash;                                    <div><span class="badge badge-soft-success font-size-12 me-1"> + 20%&ndash;&gt;-->
<!--                        &lt;!&ndash;                                        </span>test&ndash;&gt;-->
<!--                        &lt;!&ndash;                                    </div>&ndash;&gt;-->
<!--                        &lt;!&ndash;                                </div>&ndash;&gt;-->

<!--                        &lt;!&ndash;                                <div>&ndash;&gt;-->
<!--                        &lt;!&ndash;                                    <a href="javascript: void(0);" class="btn btn-primary btn-sm">View Details <i&ndash;&gt;-->
<!--                        &lt;!&ndash;                                            class="mdi mdi-chevron-right ms-1"></i></a>&ndash;&gt;-->
<!--                        &lt;!&ndash;                                </div>&ndash;&gt;-->

<!--                        &lt;!&ndash;                                <div class="mt-4">&ndash;&gt;-->
<!--                        &lt;!&ndash;                                    <p class="mb-2">test</p>&ndash;&gt;-->
<!--                        &lt;!&ndash;                                    <h5>test</h5>&ndash;&gt;-->
<!--                        &lt;!&ndash;                                </div>&ndash;&gt;-->
<!--                        &lt;!&ndash;                            </div>&ndash;&gt;-->
<!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->

<!--                        <div class="col-lg-12">-->
<!--                            <apx-chart class="apex-charts" dir="ltr" [series]="earningLineChart.series"-->
<!--                                       [chart]="earningLineChart.chart"-->
<!--                                       [colors]="earningLineChart.colors"-->
<!--                                       [stroke]="earningLineChart.stroke"-->
<!--                                       [dataLabels]="earningLineChart.dataLabels"-->
<!--                                       [xaxis]="earningLineChart.xaxis">-->

<!--                            </apx-chart>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

        <div class="col-xl-4">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title mb-4">User Satisfaction Rate</h4>
                    <div>
                        <div>
                            <apx-chart class="apex-charts" dir="ltr" [series]="salesAnalyticsDonutChart.series"
                                       [chart]="salesAnalyticsDonutChart.chart"
                                       [colors]="salesAnalyticsDonutChart.colors"
                                       [plotOptions]="salesAnalyticsDonutChart.plotOptions"
                                       [legend]="salesAnalyticsDonutChart.legend"
                                       [labels]="salesAnalyticsDonutChart.labels">
                            </apx-chart>
                        </div>
                    </div>

                    <div class="text-center text-muted">
                        <div class="row">
                            <div class="col-4">
                                <div class="mt-4">
                                    <p class="mb-2 text-truncate">
                                        <i class="mdi mdi-circle text-success me-1"></i> Satisfied
                                    </p>
                                    <h5>60%</h5>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="mt-4">
                                    <p class="mb-2 text-truncate">
                                        <i class="mdi mdi-circle text-danger me-1"></i> Dissatisfied
                                    </p>
                                    <h5>25%</h5>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="mt-4">
                                    <p class="mb-2 text-truncate">
                                        <i class="mdi mdi-circle text-warning me-1"></i> Hesitant
                                    </p>
                                    <h5>15%</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



    </div>
    <div class="row">

        <div class="col-xl-8">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title mb-4">Strategies</h4>
                    <ul ngbNav #nav1="ngbNav" [activeId]="1" class="nav-pills bg-light rounded">
                        <ng-container *ngFor="let category of reportResponse.actions | keyvalue">
                            <li [ngbNavItem]="category.key">
                                <a ngbNavLink>{{ category.key | titlecase }}</a>
                                <ng-template ngbNavContent>
                                    <ngx-simplebar style="min-height: 100px; max-height: 600px; overflow-y: auto;">
                                        <div class="table-responsive mb-0">
                                            <table class="table table-nowrap table-centered table-hover">
                                                <tbody>
                                                <tr *ngFor="let action of category.value">
                                                    <td>
                                                        <h5 class="text-truncate font-size-14 mb-1">
                                                            <a href="javascript: void(0);" class="text-dark">
                                                                {{ action.description }}
                                                            </a>
                                                        </h5>
                                                    </td>
                                                    <td style="width: 90px;">
                                                        <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" (click)="handleAction(action.actionType)">
                                                            Action
                                                        </button>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </ngx-simplebar>
                                </ng-template>
                            </li>
                        </ng-container>
                    </ul>
                    <div [ngbNavOutlet]="nav1" class="mt-4"></div>
                </div>
            </div>
        </div>


        <div class="col-xl-4">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title mb-5">User Activity - 22 Nov</h4>
                    <ul class="verti-timeline list-unstyled">
                        <li *ngFor="let activity of userActivities" class="event-list">
                            <div class="event-timeline-dot">
                                <i class="bx bx-right-arrow-circle font-size-18"></i>
                            </div>
                            <div class="media">
                                <div class="mr-3">
                                    <h5 class="font-size-14">{{ activity.time }}
                                        <i class="bx bx-right-arrow-alt font-size-16 text-primary align-middle ms-2"></i>
                                    </h5>
                                </div>
                                <div class="media-body">
                                    <div>
                                        <strong>{{ activity.action }}</strong>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>


    </div>

</div>
<ng-template #emailContent let-modal>
    <div class="modal-header">
        <h5 class="modal-title" id="composemodalTitle">New Message</h5>
        <button type="button" class="btn-close"  aria-label="Close">

        </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="mb-3">
                <input type="email" class="form-control" placeholder="To">
            </div>
            <div class="mb-3">
                <input type="text" class="form-control" placeholder="Subject">
            </div>
            <div class="mb-3">
                <ckeditor [editor]="Editor" ></ckeditor>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" >Close</button>
        <button type="button" class="btn btn-primary">Send <i class="fab fa-telegram-plane ms-1"></i></button>
    </div>
</ng-template>

