<div class="chat-container">
    <div class="chat-header">
        <h2>Assistant Chat</h2>
    </div>
    <div class="chat-messages">
        <div *ngFor="let msg of messages" class="chat-message"
             [ngClass]="{'assistant-message': msg.prompt || msg.response, 'user-message': !msg.prompt && !msg.response}">
            <div class="message-bubble">
                <ng-container *ngIf="msg.prompt; else otherMessage">
                    <span class="sender">Assistant :</span>
                    <span class="text">{{ msg.prompt }}</span>
                </ng-container>
                <ng-template #otherMessage>
                    <ng-container *ngIf="msg.response; else rawMessage">
                        <span class="sender">Assistant :</span>
                        <span class="text">{{ msg.response }}</span>
                    </ng-container>
                    <ng-template #rawMessage>
                        <span class="text">{{ msg | json }}</span>
                    </ng-template>
                </ng-template>
            </div>
        </div>
    </div>

    <div class="chat-input">
        <input
                type="text"
                [ngModel]="pendingPrompt ? promptResponse : userInput"
                (ngModelChange)="pendingPrompt ? promptResponse = $event : userInput = $event"
                [placeholder]="pendingPrompt ? 'Répondez à l\'invite...' : 'Entrez votre commande ici'"
        />
        <button (click)="send()">Envoyer</button>
    </div>
</div>
