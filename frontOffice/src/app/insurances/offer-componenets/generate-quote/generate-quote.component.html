<!-- generate-quote.component.html -->
<!-- <app-preloader></app-preloader>

<section class="insurance-quote-section"> -->
<!-- Popup Overlay (keep existing modal) -->

<!-- <div class="container-xxl">
        <div class="quote-container"> -->
<!-- Side Navigation -->
<!-- <div class="type-selector">
                <h3 class="selector-title">Insurance Types</h3>
                <div class="selector-buttons">
                    <button *ngFor="let type of formTypes" 
                            class="type-button" 
                            [class.active]="currentFormType === type.id"
                            (click)="changeFormType(type.id)">
                        <i [class]="type.icon"></i>
                        <span>{{ type.label }}</span>
                    </button>
                </div>
            </div> -->

<!-- Form Container -->
<!-- <div class="quote-form">
                <div class="form-header">
                    <h2>Get Your Custom Insurance Quote</h2>
                    <p>Complete the form below to receive your personalized quote</p>
                </div> -->

<!-- Form Content (keep your existing form structure) -->
<!-- </div>
        </div>
    </div>
</section> -->







<!-- generate-quote.component.html -->
<section class="quote-generator">
    <div class="container">
        <div class="generator-wrapper">
            <!-- Side Navigation -->
            <div class="insurance-types">
                <h3 class="types-title">
                    <i class="fas fa-shield-alt me-2"></i>Insurance Options
                </h3>
                <div class="type-buttons">
                    <button *ngFor="let type of formTypes" class="type-option"
                        [class.active]="currentFormType === type.id" (click)="changeFormType(type.id)">
                        <i [class]="type.icon"></i>
                        {{ type.label }}
                    </button>
                </div>
            </div>

            <!-- Main Form -->
            <div class="quote-form">
                <div class="form-header">
                    <h2>Get Your Personalized Quote</h2>
                    <p>Complete the form below in just 2 minutes</p>
                </div>

                <div class="tab-content">
                    <div class="tab-pane active show fade" id="dynamicForm">
                        <form class="contact-form" [formGroup]="insuranceForm">
                            <ng-container *ngFor="
                let field of formFields;
                let i = index;
                trackBy: trackByFn
              ">
                                <div class="form_group mb-3" [ngSwitch]="field.type">
                                    <div *ngIf="
                    field.type !== 'checkbox' && field.type !== 'header'
                  ">
                                        <label [attr.for]="field.label">{{ field.label }}</label>
                                    </div>

                                    <!-- Number Input -->
                                    <input *ngSwitchCase="'number'" class="form_control sideLine"
                                        [placeholder]="field.placeholder || ''"
                                        [formControlName]="getFormControlName(field, i)" type="number" />

                                    <!-- Text Input -->
                                    <input *ngSwitchCase="'text'" class="form_control sideLine"
                                        [placeholder]="field.placeholder || ''"
                                        [formControlName]="getFormControlName(field, i)" type="text" />

                                    <!-- Textarea Input -->
                                    <textarea *ngSwitchCase="'textarea'" class="form_control sideLine"
                                        style="min-height: 60px" [placeholder]="field.placeholder || ''"
                                        [formControlName]="getFormControlName(field, i)"></textarea>

                                    <!-- Email Input -->
                                    <input *ngSwitchCase="'email'" class="form_control sideLine"
                                        [placeholder]="field.placeholder || 'example@domain.com'"
                                        [formControlName]="getFormControlName(field, i)" type="email" />

                                    <!-- Telephone Input -->
                                    <input *ngSwitchCase="'tel'" class="form_control sideLine"
                                        [placeholder]="field.placeholder || '+000 (123) 456 887'"
                                        [formControlName]="getFormControlName(field, i)" pattern="[+]?[0-9]+"
                                        type="tel" />

                                    <!-- Date Input -->
                                    <input *ngSwitchCase="'date'" class="form_control sideLine"
                                        [placeholder]="field.placeholder || ''"
                                        [formControlName]="getFormControlName(field, i)" type="date" />

                                    <!-- Time Input -->
                                    <input *ngSwitchCase="'time'" class="form_control sideLine"
                                        [placeholder]="field.placeholder || ''"
                                        [formControlName]="getFormControlName(field, i)" type="time" />

                                    <!-- Color Input -->
                                    <input *ngSwitchCase="'color'" class="form_control sideLine"
                                        [placeholder]="field.placeholder || ''"
                                        [formControlName]="getFormControlName(field, i)" type="color" />

                                    <!-- Select Dropdown -->
                                    <div *ngSwitchCase="'select'" style="margin-bottom: 8px">
                                        <select class="wide nice-select" style="margin-bottom: 20px"
                                            [formControlName]="getFormControlName(field, i)">
                                            <option value="" disabled selected>
                                                Select Settlement Plan
                                            </option>
                                            <option *ngFor="let option of field.selectOptions" [value]="option">
                                                {{ option }}
                                            </option>
                                        </select>
                                    </div>

                                    <!-- Range Input -->
                                    <!-- <div *ngSwitchCase="'range'" class="single-progress-bar progress-style-one">
                                        <input type="range" class="form_control" [min]="field.rangeStart"
                                            [max]="field.rangeEnd"
                                            [formControlName]="getFormControlName(field, i)" />
                                        <div class="range-values check-list">
                                            <span>{{ field.rangeStart }}</span>
                                            <span>{{ field.rangeEnd }}</span>
                                        </div>
                                    </div> -->
                                    <div *ngSwitchCase="'range'" class="single-progress-bar progress-style-one">
                                        <!-- Range Input -->
                                        <input type="range" class="form-control range-slider" [min]="field.rangeStart"
                                            [max]="field.rangeEnd" [formControlName]="getFormControlName(field, i)"
                                            (input)="updateRangeValue(field, i, $event)" />

                                        <!-- Range Values -->
                                        <div class="range-values">
                                            <span>{{ field.rangeStart }}</span>
                                            <span class="current-value">{{
                                                getCurrentValue(field, i)
                                                }}</span>
                                            <span>{{ field.rangeEnd }}</span>
                                        </div>
                                    </div>

                                    <!-- Checkbox Group -->

                                    <div *ngSwitchCase="'checkbox'" class="check-list flex items-center gap-2">
                                        <input type="checkbox" [formControlName]="getFormControlName(field, i)"
                                            class="w-4 h-4" />
                                        <label class="text-sm">{{ field.label }}</label>
                                    </div>

                                    <!-- Radio Buttons -->
                                    <div *ngSwitchCase="'radio'" class="radio-group">
                                        <label *ngFor="let option of field.selectOptions" class="radio-label">
                                            <input type="radio" [formControlName]="getFormControlName(field, i)"
                                                [value]="option" />
                                            <span>{{ option }}</span>
                                        </label>
                                    </div>

                                    <!-- Validation Errors -->
                                    <div *ngIf="
                    insuranceForm.controls[getFormControlName(field, i)]
                      .invalid &&
                    (insuranceForm.controls[getFormControlName(field, i)]
                      .touched ||
                      insuranceForm.controls[getFormControlName(field, i)]
                        .dirty)
                  " class="validation-error text-danger">
                                        <span
                                            *ngIf="insuranceForm.controls[getFormControlName(field, i)].errors?.['required']">
                                            This field is required
                                        </span>
                                        <span
                                            *ngIf="insuranceForm.controls[getFormControlName(field, i)].errors?.['pattern']">
                                            {{ field.regexErrorMessage }}
                                        </span>
                                    </div>
                                </div>
                            </ng-container>

                            <div class="form_group">
                                <!-- <button type="submit" class="main-btn primary-btn btn-link no-underline"
                                    [disabled]="isLoading" (click)="onSubmit()">
                                    <span *ngIf="!isLoading">Submit <i class="fa fa-arrow-right"></i></span>
                                    <span *ngIf="isLoading">
                                        <i class="fa fa-spinner fa-spin"></i> Loading...
                                    </span>
                                </button> -->
                                <button type="submit" class="main-btn primary-btn btn-link no-underline"
                                    (click)="onSubmit()">
                                    <span>Submit <i class="fa fa-arrow-right"></i></span>
                                </button>
                                <div *ngIf="!insuranceForm.valid && notValid"
                                    class="validation-error text-danger ms-1 mt-2">
                                    <span style="font-size: 18px">
                                        One or more fields have an error. Please check and try
                                        again.
                                    </span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>